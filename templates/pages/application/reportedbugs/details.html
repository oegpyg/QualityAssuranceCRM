{% extends 'layout/app.html' %}

{% block title %} Errores Reportados {% endblock %}

{% load i18n %}

{% load static %}

{% load custom_filters %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-lg-12">
            <div class="breadcrumb-main application-ui mb-30">
                <div class="breadcrumb-action d-flex">
                    <div class="d-flex align-items-center user-member__title me-sm-25 me-0">
                        <h4 class="text-capitalize fw-500 breadcrumb-title">{{bug.title}}</h4>
                    </div>
                    <div class="action-btn me-10 my-sm-0">
                        <a href="#" class="btn btn-primary bg-primary fs-12 fw-500"><img src="{% static 'img/svg/plus.svg' %}" alt="plus" class="svg"> Add
                            Error Reportado</a>
                    </div>
                    <div class="btn-group-toggle" data-bs-toggle="buttons">
                        <input type="checkbox" class="btn-check" id="btn-check-2-outlined" autocomplete="off">
                        <label class="btn btn-outline-secondary" for="btn-check-2-outlined"> <img src="{% static 'img/svg/check.svg' %}" alt="check" class="svg"> Marcar como Resuelto</label>
                    </div>
                </div>
                <div class="d-flex text-capitalize">
                    <button type="button" class="breadcrumb-edit btn btn-white border-0 color-primary content-center fs-12 fw-500 radius-md">
                        <img src="{% static 'img/svg/edit-3.svg' %}" alt="edit-3" class="svg">edit</button>
                    <button type="button" class="breadcrumb-remove border-0 color-danger content-center bg-white fs-12 fw-500 ms-10 radius-md">
                        <img class="svg" src="{% static 'img/svg/trash-2.svg' %}" alt="trash-2">remove</button>
                </div>
            </div>
        </div>
    </div>
    <div class="projects-tab-content mb-30">
        <div class="row">
            
            <div class="col-xxl-12 col-lg-12">
                <div class="row">
                    <div class="col-xxl-9 col-lg-9 mb-25">
                        <div class="card border-0 pb-md-50 pb-15">
                            <div class="card-header py-sm-20 py-3  px-sm-25 px-3 ">
                                <h6>Acerca del Error</h6>
                            </div>
                            <div class="card-body">
                                <div class="about-projects">
                                    <div class="about-projects__details">
                                        <p class="fs-15 mb-25">{{bug.summary}}</p>
                                        <p class="fs-15">{{bug.description}} </p>
                                    </div>
                                    <ul class="d-flex text-capitalize">
                                        <li>
                                            <span class="color-light fs-13">Ejecucion de Pruebas</span>
                                            <a href="{% url 'application:testejecution_details' bug.testEjecution.id %}"><p class="color-dark fs-14 mt-1 mb-0 fw-500">{{bug.testEjecution.title}}</p></a>
                                        </li>
                                        
                                    </ul>
                                    
                                </div>
                            </div>
                        </div>
                        
                    </div>
                    <div class="col-xxl-3 col-lg-3 mb-25">
                        {% comment %} <div class="progress-box px-25 pt-25 pb-10 bg-success radius-xl">
                            <div class="d-flex justify-content-between mb-3">
                                <h6 class="text-white fw-500 fs-16 text-capitalize">progreso</h6>
                                <span class="progress-percentage text-white fw-500 fs-16 text-capitalize">{{release.task_set.all|count_by_status_perc:4|stringformat:'d'}}%</span>
                            </div>
                            <div class="progress-wrap d-flex align-items-center mb-15">
                                <div class="progress progress-height">
                                    <div class="progress-bar bg-white" role="progressbar" style="width: {{release.task_set.all|count_by_status_perc:4|stringformat:'d'}}%;" aria-valuenow="{{release.task_set.all|count_by_status_perc:4|stringformat:'d'}}" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                            </div>
                        </div> {% endcomment %}


                        <div class="card mt-25">
                            <div class="card-body">
                                
                                {% comment %} <div class="application-task d-flex align-items-center mb-25">
                                    <div class="application-task-content">
                                        <h4>{{release.task_set.all|count_by_status:4}}/{{release.task_set.count}}</h4>
                                        <span class="text-light fs-14 mt-1 text-capitalize">tareas completadas</span>
                                    </div>
                                </div> {% endcomment %}
                                <div class="application-task d-flex align-items-center mb-25">
                                    <div class="application-task-content">
                                        <h4>{{bug.status}}</h4>
                                        <span class="text-light fs-14 mt-1 text-capitalize">Status</span>
                                        
                                    </div>
                                </div>
                                <div class="application-task d-flex align-items-center mb-25">
                                    <div class="application-task-content">
                                        <h4>{{bug.priority}}</h4>
                                        <span class="text-light fs-14 mt-1 text-capitalize">Prioridad</span>
                                    </div>
                                </div>
                                <div class="application-task d-flex align-items-center mb-25">
                                    <div class="application-task-content">
                                        <h4>{{bug.severity}}</h4>
                                        <span class="text-light fs-14 mt-1 text-capitalize">Severidad</span>
                                    </div>
                                </div>
                                <div class="application-task d-flex align-items-center mb-25">
                                    <div class="application-task-content">
                                        <h4>{{bug.reporter.first_name}} {{bug.reporter.last_name}}</h4>
                                        <span class="text-light fs-14 mt-1 text-capitalize">Reportado por</span>
                                    </div>
                                </div>
                                <div class="application-task d-flex align-items-center mb-25">
                                    <div class="application-task-content">
                                        <h4>{{bug.assignedTo.first_name}} {{bug.assignedTo.last_name}}</h4>
                                        <span class="text-light fs-14 mt-1 text-capitalize">Asignado a</span>
                                    </div>
                                </div>

                                
                                
                            </div>
                        </div>  
                    </div>

                        
                    </div>
                    
            </div>
                    
                    
                </div>
            </div>


            <div class="col-xxl-12 col-lg-12">
                <div class="row">
                    <div class="col-xxl-9 col-lg-9 mb-25">
                        <div class="card border-0 pb-md-50 pb-15">
                            <div class="card-header py-sm-20 py-3  px-sm-25 px-3 ">
                                <h6>Pasos para replicar</h6>
                            </div>
                            <div class="card-body">
                                <div class="about-projects">
                                    <div class="about-projects__details">
                                        <p class="fs-15 mb-25">{{bug.stepsToReproduce|safe}}</p>
                                    </div>
                                    <ul class="d-flex text-capitalize">
                                        <li>
                                            <span class="color-light fs-13">Frecuencia</span>
                                            <p class="color-dark fs-14 mt-1 mb-0 fw-500">{{bug.frenquency}}</p>
                                        </li>
                                        
                                    </ul>
                                    
                                </div>
                            </div>
                        </div>
                        
                    </div>
                    

                    
                </div>
                    
                    
            </div>
            

            <div class="col-xxl-12 col-lg-12">
                <div class="row">
                    <div class="col-xxl-12 col-lg-12 mb-25">
                        <div class="card border-0 pb-md-50 pb-15">
                            <div class="card-header py-sm-20 py-3  px-sm-25 px-3 ">
                                <h6 class="color-primary">Documentacion del Caso</h6>
                            </div>
                            <div class="card-body">
                                <div class="about-projects">
                                    <div class="about-projects__details">
                                        <div class="mail-content__bottom">
                                            {%for att in bug.reportedbugsdocumentation_set.all %}
                                            <a href="{% url 'application:casetestdoc_details' att.id %}" class="mail-attatchment color-dark">
                                                <i class="las la-paperclip"></i>
                                                <span class="attatched-file">{{att.image.name|split_last:"/"}}</span>
                                            </a>
                                            {%endfor%}
                                        </div> 
                                    </div>                                   
                                </div>
                            </div>
                        </div>
                    </div>
            </div>

            
        </div>
    </div>
</div>
{% endblock %}